<HTML>

<HEAD>

<TITLE>

mmstory.htm: fravia's anonimity academy: "What's behind the mm256.dat and mm2048.dat files?"

</TITLE>

<!-------------------DO NOT LINK DIRECTLY TO THIS PAGE--------------> 

<!----------------------(OR DO IT AT YOUR OWN RISK)-----------------> 



</HEAD>



<BODY bgcolor="#C0C0C0" text="#001010" vlink="#405040 Alink=#00FF50">

<A name="anchortop">

<!-- Begin Introdo -->

<!-- Fun with colors Begin -->

<TABLE bgcolor="#FF0000" CELLPADDING="7" CELLSPACING="0">

<TR><TH bgcolor="#FF0000">

<FONT color="#804000" SIZE="7">

C<BR>O<BR>N<BR>C<BR>E<BR>A<BR>L<BR>E<BR>D<BR>

</FONT>

<TH BGCOLOR="#804000">

<FONT COLOR="#FF8000" SIZE="7" FACE="ARIAL">

fravia's<BR>hidden software<BR><BR><BR>

<FONT COLOR="#FF8000" SIZE="1" FACE="ARIAL">

Fravia's Nofrill<BR>

Web design<BR>

(1998)

</FONT>

</TH>

<TH BGCOLOR="#804000"><PRE> </PRE></TH>

<TH BGCOLOR="#804000"><BR>

<FONT COLOR="#FF8000" SIZE="1" FACE="ARIAL">updated<BR>September 1998

</TH>

<TH BGCOLOR="#C0C0C0"><CENTER><TABLE><TR><TD><CENTER><A href="project9.htm" tppabs="http://www.anticrack.de/fravia/project9.htm"><IMG SRC="project9.gif" tppabs="http://www.anticrack.de/fravia/project9.gif" 

ALT="M$bashing" ALIGN=BOTTOM WIDTH=114 

EIGHT=43 BORDER=0 VSPACE=0 HSPACE=0></A>

</CENTER></TD><TD><CENTER><A href="noanon.htm" tppabs="http://www.anticrack.de/fravia/noanon.htm"><IMG SRC="anon1.gif" tppabs="http://www.anticrack.de/fravia/anon1.gif" ALT="noanon" 

ALIGN=BOTTOM WIDTH=114 HEIGHT=43 BORDER=0 VSPACE=0 HSPACE=0></A>

</CENTER></TD>

</CENTER></TD></TR>

<TR><TD><CENTER><FONT color=Gray>Back to project 9</FONT></CENTER></TD>

<TD><CENTER><FONT color=Gray>Back to Anonymity</FONT></CENTER></TD></TR></TABLE>



<H1>What's behind the mm256.dat and mm2048.dat files?</H1></CENTER>

<CENTER><FONT size="+1"><I>(Don't trust your software - 1)</I></FONT>



<HR width="33%">

Concealed and hidden files inside your own computer.<BR>D'you really know what your software 

is doing when you are asleep?<BR>

</CENTER>

</FONT>

</TH>

<TH BGCOLOR="#804000"><PRE> </PRE></TH>

</TR>

</TABLE>



<P><FONT size=+2>First essay: What's behind the mm256.dat and mm2048.dat files?</FONT><BR>A small 

contribution in order to damage Micro$oft<BR>

by fravia+, 15 June 1998<HR><P>

Quite some time ago I started my studies of the two 'mysterious' files mm256.dat and mm2048.dat. 

Apart from the funny names (and we should never underestimate 

the importance of <U>names</U> on the web... a name like mm256.dat sounds MUCH more neutral and 

uninteresting than, say "peeping.tom") there seem to be 

very few serious material about these two files on the net. Both files contain, among other things 

(for instance <U>all</U> the URL you visited in your lifetime) the complete directory structure of your bootdrive (!!)<BR>

Recently a German friend (Chiphead) wrote me asking why these two files 

were not mentioned on my pages, since 

they represent classical 

examples of Micro$oft's 'concealed' activities. The simple answer is that I have NOT yet 

finished my studies on these files. But, he is right, and the question deserves to be 

cracked (in the BEST sense of this great word). Since I have "a lot of other cats to whip", 

I have decided to publish this essay <U>right now</U> even if it is NOT ready.<BR>Besides, 

I publish this now also in the hope to damage a little more Micro$oft's current 'delicate' 

legal situation. 

<BR>Look 

at this unfinished essay as a 'base of 

discussion' for your own work on this area, I just hope to start a "rolling avalanche" of nice 

reversing sessions: therefore, PLEASE, by all means, do

 contribute and help, because I must confess that 

the more I examine these files (and their "regenerating" behaviour), the more I'm 

puzzled. This is either the definitive proof that Billgato is cheating or the definitive 

proof that Billgato (and his minions) are absolute software lamers.<BR>The fact is, 

as you will read here, that 

Micro$oft's 

Windows 95, (in conjunction with Internet Explorer) slips 

unwanted files (Mm2048.dat & Mm256.dat) 

on your hard disk without your knowledge or permission (5 to 7 copies of each 

for a total of 5 to 20 megabytes. No wonder your harddisk space is vanishing!)<BR>

MS tech support claims that you are not even supposed

to know that they exist and anyway you cannot delete them: here the only 

explanations given -grudgingly- by Micro$oft itself:<BR>

<FONT color=purple><PRE>

The Mm256.dat and Mm2048.dat files are cache files used by Internet

Explorer. When you visit a Web page, Internet Explorer assigns the Web

address a unique identification number and searches the Mm256.dat and

Mm2048.dat files for that identification number. If the Web page's

identification number is found, the contents of the Web page are stored

locally on your computer's hard disk and Internet Explorer uses the

locally stored content instead of downloading the information from the

Internet. If the Web page's identification number is not found, the

contents of the Web page must be downloaded from the Internet. This occurs

if you have not visited the Web page before, the Web page has changed, or

the Web page's identification number has expired. When the Web page's

content has been downloaded to the hard disk, the Mm256.dat or Mm2048.dat

file is updated with the Web page's identification number.

<P>

The Mm256.dat file is used to store the identification numbers of Web

pages whose Web addresses are equal to or less than 256 characters. The

Mm2048.dat is used to store the identification numbers of Web pages whose

Web addresses are between 257 and 2048 characters.

</PRE></FONT><BR>

The above words, if you apply the simplest "semanthical reversing" 

techniques, do not 

mean much... (ok, I'll concede that you know now that mm256.DAT is basically meant 

for cookies, 

and mm2048.dat, instead, for web-pages) and the same words for sure don't explain either 

why these heavy monsters hyde the complete directory structure of your 

bootdrive as well inside their mysterious guts.<BR>Come to think of it, the words do 

not seem to explain much why 

these files pop up inside harddisks of people that is NOT USING M$IE at all 

either.<B>In my opinion the real interesting question therefore is: if this are the 

concealed activities of Windows 95 (and NT)... what will Windows

98 <U>with built-in Internet Explorer</U> be able to do to your hard drive and 

to your privacy?</B>

<HR>

<P><FONT size=+2>Let's start with the facts</FONT><HR width=33%>

<P>Let's have a look at mm256.dat and mm2048.dat, and see they are NOT THE SAME THING in 

various copies: in fact they come in three "flavours" (each): 

"small", "median" and "big" (in the case of mm2048.dat I would say "huge": more than a million 

bytes for each copy in my computer, but if you really browse a lot you may have some overbloated 

"3 millions bytes" beasts inside yours! (And this even if you may have set the 

"number of days to keep history" 

to "1"... Have a look for yourselves :-)<BR>

 In fact you (yes, each one of you, my dear readers) have <U>numerous copies</U> 

of these two files inside your harddisk.<BR>

There is a copy of both inside c:\windows\history ("big" mm256.dat around 200.000 bytes 

and "middle" mm2048.dat, same size)<BR>

There is a copy of both inside c:\windows\cookies ("small" versions of both, 

respectively 16.000 and 8.000 bytes)<BR>

There is a copy of mm256.dat inside c:\windows\temp ("big" version, same as the one 

in c:\windows\history)<BR>

There is a copy of both inside each of the four cache subdirectories c:\windows\tempor~1\cache1~2~3~4

 ("middle" mm256.dat at 65.536 bytes, 

"huge" mm2048.dat at more than a million bytes each... incidentally this takes 5 megabytes of your 

hard disk space without neither asking nor even showing the culprits)<BR>



BTW, You will not see the huge files in the caches with explorer (in fact, 

you won't see 

the subdirectories of c:\windows\temporary internet files: cache1, cache2, cache3 

and cache4 at all).<BR>Good old dos, being MORE user friendly, even if it will still show 

you an empty c:\windows\tempor~1 directory, will allow you to enter the command 

<FONT color purple>cd c:\windows\tempor~1\cache1</FONT> (or cache2, or cache3 or cache4) and 

will tehrefore allow you to have a look at the hidden cache goodies. Of course there are 

thousand good utilities to sniff them nevertheless, (provided you know their names)<BR>

As I said, a couple of our targets dwells inside the 'history' folder as well. In 

fact the History folder is not containing what you can see with Micro$oft's explorer. If

you use FindFirstFile... or if you go with a command line and use DIR, you

will find there 3 files: desktop.ini, mm256.dat ('big') and mm2048.dat ('median') 

that contain the

information displayed by the explorer. History is in fact the junction

point of a namespace extension (a shell extension).

<BR>

At first glance all this saga could look just like a sort of semi_automated database 

storage and retrieval system for cookies 

and cached pages and images (in fact inside these targets there are <I>in extenso</I>  

ALL the URLs you have visited from 

your childhood until a second ago) bizarre, yet somehow understandable...<BR>

<CENTER><FONT color=Red><FONT size=+3>BUT</FONT></FONT></CENTER>

<BR><I>My worklist, not yet finished... </I>:-)

<BR>

How comes that the mm2048.dat and mm256.dat files are all updated regularly WITHOUT any connexion 

to the web whatsoever?<BR>

How comes that you have these files well updated even if you are NOT using M$IE explorer?<BR>

Those files are created and maintained by the wininet.dll subsystem? (Does  M$IE

use wininet to access them?)<BR>

 Is it enough to check Internet Properties

in Control Panel & if necessary change cache location,

or these folders will be re-created even if you dleted them?

Funny isn't it? Let's go on...<HR>

So what have we until now?<BR>

The ones in the History Folder contain all the data corresponding to the links 

you see when its opened in Windows (they

     effectively <U>are</U> the History Folder). 

   <P>    

     The ones in the Temporary Internet Files Folder contain the mapping that 

associates files to actual web-page elements in

     the cache. 

      <P> 

     A cursory look at the contents of those in the Cookies folder show they 

contain references to at least some (if not all)

     the cookies set in the browser.<BR>

 If all files except these two are deleted from the Cookies Folder 

after M$IE has been shut down, no persistent cookies

     will be reloaded into Internet Explorer the next time it is 

launched.<BR>  It may be that these 

files act as a database to store and retrieve cookies while the

     browser is running... but they do not seem to be used to 

reload cookies. Any other guesses?<P>

       

    











 They are most persistant files, difficult but not impossible to get rid of, 

even though they often <U>regenerate</U>. Usually you have 13 of them, at times some more. 

They can <U>often</U> be found in c:\windows\cookies c:\windows\history and c:\\windows\tempor~1\cache1 & cache 2 & cache3 & cache4, 

but they may appear also in your  c:\windows\java\hist# folders. 

<HR>

OK, let's start sniffing inside them here the ones I have RIGHT NOW (Fri 12 june 98, 13:31) 

on the computer I'm working on:

<FONT color=purple>

<PRE>

FF-File Find, ZauberEdition 0.50



C:\WINDOWS\TEMPOR~1\CACHE1  mm256.dat     32.768 bytes  13:16  Fri12Jun98 -median

C:\WINDOWS\TEMPOR~1\CACHE2  mm256.dat     40.960 bytes  13:16  Fri12Jun98 -median

C:\WINDOWS\TEMPOR~1\CACHE3  mm256.dat     32.768 bytes  13:16  Fri12Jun98 -median

C:\WINDOWS\TEMPOR~1\CACHE4  mm256.dat     32.768 bytes  13:16  Fri12Jun98 -median

C:\WINDOWS\HISTORY          mm256.dat    180.224 bytes  13:16  Fri12Jun98 -big

C:\WINDOWS\COOKIES          mm256.dat      8.192 bytes  13:16  Fri12Jun98 -small

6 files found oh great master!



FF-File Find, ZauberEdition 0.50

C:\WINDOWS\TEMPOR~1\CACHE1  mm2048.dat 1.310.720 bytes  13:16  Fri12Jun98 -huge

C:\WINDOWS\TEMPOR~1\CACHE2  mm2048.dat 1.253.376 bytes  13:16  Fri12Jun98 -huge

C:\WINDOWS\TEMPOR~1\CACHE3  mm2048.dat 1.269.760 bytes  13:16  Fri12Jun98 -huge

C:\WINDOWS\TEMPOR~1\CACHE4  mm2048.dat 1.187.840 bytes  13:16  Fri12Jun98 -huge

C:\WINDOWS\HISTORY          mm2048.dat   532.480 bytes  13:16  Fri12Jun98 -median

C:\WINDOWS\COOKIES          mm2048.dat     8.192 bytes  13:16  Fri12Jun98 -small

6 files found oh great master!

</PRE>

</FONT>

<BR> Let's start with the "small" mm256.dat, since the "small" mm2048.dat seems to 

refer only to "Remote server was not contacted, document may be out-of-date." messages.

<BR>You'll read inside both:<BR><FONT color=blue>

Client UrlCache MMF Ver 3.2</FONT><BR>

And then in the "small" mm256.dat, follows the  whole collection of your planted cookies.<BR>

Well what's going on with these 'Microsoft Mail F' couple?<BR>

Inside c:\windows/system dwells a <FONT color=blue>mmfmlg32.dll</FONT> (the one on this 

PC is 295760 bytes long from 

20 Mar 1997). Let's have a look at it and see, a strange alien world:<BR>

PAB entries and PAB files... (with a whole "PABImporter"... that's Personal Address Book, btw)<BR>

AutoRebuildFolders (MMF=Micro$oftMailFolders? or rather Micro$oftMailFiles?)<BR>

MMFMIG... (this is probably a migrate MMF processor)<BR>

and a whole bunch of 'relicts' from the debugging/testing time of this application, which 

tell us the names of some of the source files used by the lazy Micro$oft's minions:<BR>

"Q:\MIGRATE\src\pabmig\list.cpp"<BR>

"Q:\MIGRATE\src\pabmig\mdbstore.cpp"<BR>

"Q:\MIGRATE\src\pabmig\parse.cpp"<BR>

"Q:\MIGRATE\src\pabmig\pn.cpp"<BR>

"Q:\MIGRATE\src\pabmig\x400.cpp"<BR>

<BR>

Well, quite a mess, let's go deeper...<BR>





<HR>

To conclude:<BR>

Microsoft's Windows95 (and NT) maintains a minimum of 12 "user

activity" databases. These files are known as "MM256.DAT" and "MM2048.DAT" and one of 

each is kept in

your history folder (hidden completely), your cookies folders and in each of 

your four cache folders (also hidden).<BR>

 The cookies and cache folders are not the only records MSIE 

keeps on your internet activities. If

you use MSIE's mail and news, everything you read and see is also recorded 

intact in other databases within

MSIE. A good deal of information is also stored in the registry where your 

file system cannot get at it. What is the reason of the 'secretness' surronding 

these files is anybody guess.<HR width=3>



<FONT size=+3><FONT color=blue><CENTER>Possible solutions

</FONT></FONT>

<FONT size=+1>

<BR>Solution number 1<BR></FONT><BR></CENTER>

Make a new directory, I named mine fravache. Do not make any of the 4

hidden sub-directories though. Open the browser and use the 'Move Folder' button to

point M$IE to this new directory. Delete the default TIF directory that came

with M$IE and restart your computer. When you open M$IE after restarting Windows

it will create 4 hidden directories, 8 mm2*.dat files and 1 hidden *.ini file. Each

sub-directory will contain the 2 mm2*.dat

M$IE's cache will still work the same and you can still see and recall the

stored data it contains UNTIL you poke the 'Empty Folder' button.

<P>

	For the Cookies simply change the label in the Registry

which will keep M$IE from writing into these 2 directories. If you don't clear

M$IE's cache after these Registry changes you can still see all 'History' data in

the history folder when using M$IE but if you check that

directory, it should contain 3 files with more or less 17000 bytes. The History data 

will be

shelled into this directory from M$IE's disk cache. I DO NOT know -honestly- if this will 

always work :-(



<HR>

<CENTER>...and then they wonder why everybody with a brain hates the windows OS and Micro$oft...

<HR>

<H3><FONT color=blue>awaiting YOUR OWN contributions!

</FONT><HR>

A small contribution by ~JaY~<BR>(23 September 1998)</CENTER></H3>

Fravia, I have noticed that on the network where I work another

                 mysterious invisible file can be found along with those two.

                 It is called <FONT color=blue>index.dat</FONT> and it contains MANY URL (but not all of them)

                 that just about everyone that has used that computer have been to.

                 It seems that if you use Opera (still yet, another endearing quality)

                 this file is not updated.<BR>

                 I just though that you would like to know this FACT, because I didn't

                 see it mentioned in you essay on the mm256.dat and mm2048.dat files.

<P>

                 What if micro$oft secretly uploaded the contents of these files to an

                 invisible incoming folder when you access sites like hotmail or anything

                 on M$N and arranged them in database like form??

   <BR>              AN ERGONOMIC STUDY OF THE COMPUTING WORLD. That's what you would have.

                 That has to be part of the reasoning behing Micro$oft's secrecy behind

                 them.  It makes sense to me.  They can give people what they want by

                 spying on what they do and making that content readily accessible and

                 conviently commercialized.

                 That would be so sweet if that theory became public, don't you think?

                 Keep on Cracking....<BR>~JaY~

<HR><CENTER><P align=center>

<!-- Begin mover -->

<TABLE><TR><TD><CENTER><A href="project9.htm" tppabs="http://www.anticrack.de/fravia/project9.htm"><IMG SRC="project9.gif" tppabs="http://www.anticrack.de/fravia/project9.gif" 

ALT="M$bashing" ALIGN=BOTTOM WIDTH=114 

EIGHT=43 BORDER=0 VSPACE=0 HSPACE=0></A>

</CENTER></TD><TD><CENTER><A href="noanon.htm" tppabs="http://www.anticrack.de/fravia/noanon.htm"><IMG SRC="anon1.gif" tppabs="http://www.anticrack.de/fravia/anon1.gif" ALT="noanon" 

ALIGN=BOTTOM WIDTH=114 HEIGHT=43 BORDER=0 VSPACE=0 HSPACE=0></A>

</CENTER></TD>

</TR>

<TR><TD><CENTER><FONT color=Gray>Back to project 9</FONT></CENTER></TD>

<TD><CENTER><FONT color=Gray>Back to Anonymity</FONT></CENTER></TD></TR></TABLE><BR>

 <IMG SRC="bulletr.gif" tppabs="http://www.anticrack.de/fravia/bulletr.gif" HEIGHT="13" WIDTH="13" ALT="red"><A HREF="index.html" tppabs="http://www.anticrack.de/fravia/index.html">homepage</A>

 <IMG SRC="bulletr.gif" tppabs="http://www.anticrack.de/fravia/bulletr.gif" HEIGHT="13" WIDTH="13" ALT="red"><A HREF="links.htm" tppabs="http://www.anticrack.de/fravia/links.htm">links</A>

 <IMG SRC="bulletr.gif" tppabs="http://www.anticrack.de/fravia/bulletr.gif" HEIGHT="13" WIDTH="13" ALT="red"><A HREF="orc.htm" tppabs="http://www.anticrack.de/fravia/orc.htm">+ORC</A>

 <IMG SRC="bulletr.gif" tppabs="http://www.anticrack.de/fravia/bulletr.gif" HEIGHT="13" WIDTH="13" ALT="red"><A HREF="startbot.htm" tppabs="http://www.anticrack.de/fravia/startbot.htm">bots wars</A>

 <IMG SRC="bulletr.gif" tppabs="http://www.anticrack.de/fravia/bulletr.gif" HEIGHT="13" WIDTH="13" ALT="red"><A HREF="student.htm" tppabs="http://www.anticrack.de/fravia/student.htm">students' essays</A>

 <IMG SRC="bulletr.gif" tppabs="http://www.anticrack.de/fravia/bulletr.gif" HEIGHT="13" WIDTH="13" ALT="red"><A HREF="coumes.htm" tppabs="http://www.anticrack.de/fravia/coumes.htm">counter measures</A>

<BR>

 <IMG SRC="bulletr.gif" tppabs="http://www.anticrack.de/fravia/bulletr.gif" HEIGHT="13" WIDTH="13" ALT="red"><A HREF="botstart.htm" tppabs="http://www.anticrack.de/fravia/botstart.htm">bots wars</A>

 <IMG SRC="bulletr.gif" tppabs="http://www.anticrack.de/fravia/bulletr.gif" HEIGHT="13" WIDTH="13" ALT="red"><A HREF="ideale.htm" tppabs="http://www.anticrack.de/fravia/ideale.htm">antismut CGI tricks</A>

 <IMG SRC="bulletr.gif" tppabs="http://www.anticrack.de/fravia/bulletr.gif" HEIGHT="13" WIDTH="13" ALT="red"><A HREF="academy.htm" tppabs="http://www.anticrack.de/fravia/academy.htm">academy database</A>

 <IMG SRC="bulletr.gif" tppabs="http://www.anticrack.de/fravia/bulletr.gif" HEIGHT="13" WIDTH="13" ALT="red"><A HREF="tools.htm" tppabs="http://www.anticrack.de/fravia/tools.htm">tools</A>

 <IMG SRC="bulletr.gif" tppabs="http://www.anticrack.de/fravia/bulletr.gif" HEIGHT="13" WIDTH="13" ALT="red"><A HREF="javascri.htm" tppabs="http://www.anticrack.de/fravia/javascri.htm">javascript tricks</A>

<BR> 

 <IMG SRC="bulletr.gif" tppabs="http://www.anticrack.de/fravia/bulletr.gif" HEIGHT="13" WIDTH="13" ALT="red"><A HREF="cocktail.htm" tppabs="http://www.anticrack.de/fravia/cocktail.htm">cocktails</A>

 <IMG SRC="bulletr.gif" tppabs="http://www.anticrack.de/fravia/bulletr.gif" HEIGHT="13" WIDTH="13" ALT="red"><A HREF="searengi.htm" tppabs="http://www.anticrack.de/fravia/searengi.htm">search_forms</A>

 <IMG SRC="bulletr.gif" tppabs="http://www.anticrack.de/fravia/bulletr.gif" HEIGHT="13" WIDTH="13" ALT="red"><A HREF="info.htm" tppabs="http://www.anticrack.de/fravia/info.htm">mail_fravia+</A>

<BR>

 <IMG SRC="bulletr.gif" tppabs="http://www.anticrack.de/fravia/bulletr.gif" HEIGHT="13" WIDTH="13" ALT="red"><A HREF="legal.htm" tppabs="http://www.anticrack.de/fravia/legal.htm">Is software reverse engineering illegal?</A>

</CENTER>

<!-- End mover -->

<HR>

<!-- Begin signet -->

<FONT color=green><A href="awards.htm" tppabs="http://www.anticrack.de/fravia/awards.htm"><IMG SRC="bulletr.gif" tppabs="http://www.anticrack.de/fravia/bulletr.gif" ALT="red" WIDTH=13 HEIGHT=13 BORDER=0 VSPACE=0 

HSPACE=0></A>(c) <A href="io13.htm" tppabs="http://www.anticrack.de/fravia/io13.htm">Fravia</A>, 1995, 1996, 1997, 1998.</FONT> 

All rights reserved

<HR ALIGN=CENTER WIDTH=100% SIZE=3>

</BODY>

</HTML>